<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">

<title>초등 커뮤니티 - 관리자 - 회원목록</title>

<script defer src="./js/modal.js"></script>
<script defer src="./js/schoolSearch.js"></script>
<link rel="stylesheet" href="./css/modal.css">
<link rel="stylesheet" href="./css/schSearch.css">



<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script
	src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<!-- Custom fonts for this template -->
<link th:href="@{/vendor/fontawesome-free/css/all.min.css}"
	rel="stylesheet" type="text/css">
<link
	href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
	rel="stylesheet">

<!-- Custom styles for this template -->
<link th:href="@{/css/sb-admin-2.min.css}" rel="stylesheet">

<!-- Custom styles for this page -->
<link th:href="@{/vendor/datatables/dataTables.bootstrap4.min.css}"
	rel="stylesheet">

</head>

<body id="page-top">

	<!-- Page Wrapper -->
	<div id="wrapper">

		<!-- Sidebar -->
		<ul th:replace="mypage/common/member_slidebar :: member_slidebar"></ul>

		<!-- Content Wrapper -->
		<div id="content-wrapper" class="d-flex flex-column">

			<!-- Main Content -->
			<div id="content">

				<!-- Topbar -->
				<nav th:replace="mypage/common/member_topBar::member_topBar"></nav>

				<!-- Begin Page Content -->
				<div class="container-fluid">

					<!-- DataTales Example -->
					<div class="card shadow mb-4">
						<div class="card-header py-3">
							<h6 class="m-0 font-weight-bold text-primary">내 정보 수정</h6>
						</div>
						<div class="card-body">

							<div id="userManage" class="border border-3 py-4 px-5">

								<form id="frm" method="post">

									<div class="row">

										<div class="d-flex flex-column col-12 col-md-6 col-xl-3 mt-2">
											<label for="userId">이름</label> 
											<input class="form-control" type="text" name="name" th:value="${user.name}">
										</div>

										<div class="d-flex flex-column col-12 col-md-6 col-xl-3 mt-2">
											<label for="userName">이메일</label> 
											<input class="form-control" type="email" name="email" id="updateEmail" th:value="${user.email}">
										</div>
									


										<div class="d-flex flex-column col-12 col-md-6 col-xl-3 mt-2">
										<label for="school_name">학년</label>
											<select class="form-control" id="userGrade" name="usergrade">
												<option value="" selected>학년 선택</option>
												<option value="1">1학년</option>
												<option value="2">2학년</option>
												<option value="3">3학년</option>
												<option value="4">4학년</option>
												<option value="5">5학년</option>
												<option value="6">6학년</option>
											</select> 
										</div>
											
										<div class="d-flex flex-column col-12 col-md-6 col-xl-3 mt-2">	
										<label for="school_name">반</label> 
											<select class="form-control" id="userClass" name="userclass">
												<option value="" selected>반 선택</option>
												<option value="1">1반</option>
												<option value="2">2반</option>
												<option value="3">3반</option>
												<option value="4">4반</option>
												<option value="5">5반</option>
												<option value="6">6반</option>
												<option value="7">7반</option>
												<option value="8">8반</option>
												<option value="9">9반</option>
												<option value="10">10반</option>
												<option value="11">11반</option>
												<option value="12">12반</option>
												<option value="13">13반</option>
												<option value="14">14반</option>
												<option value="15">15반</option>
												<option value="16">16반</option>
												<option value="17">17반</option>
												<option value="18">18반</option>
												<option value="19">19반</option>
												<option value="20">20반</option>
											</select>
										</div>


										<!-- 									모달										 -->

										<!-- 시도교육청 코드 -->
										<input class="d-none" type="text" id="ATPT_OFCDC_SC_CODE_SIGN"
											name="education_code" size="20" value="">

										<!-- 시도교육청 이름 -->
										<div class="d-flex flex-column col-12 col-md-6 col-xl-3 mt-2">
											<label for="userId">교육청명</label> <input class="form-control"
												type="text" id="ATPT_OFCDC_SC_NM_SIGN" name="education"
												th:value="${user.education}" size="20" readonly>
										</div>

										<!-- 학교 코드 -->
										<input class="d-none" type="text" id="SD_SCHUL_CODE_SIGN"
											name="school_code" size="20" value="">

										<!-- 학교 이름 -->
										<div class="d-flex flex-column col-12 col-md-6 col-xl-3 mt-2">
											<label for="userId">학교명</label> <input class="form-control"
												type="text" id="SCHUL_NM_SIGN" name="school"
												th:value="${user.school}" size="20" readonly>
										</div>

										<div class="d-flex justify-content-end mt-4">
											<button id="modalBtn" class="btn">학교선택</button>
										</div>

										<div class="d-flex justify-content-end mt-4">
											<button class="btn btn-sm btn-outline-primary" type="button" id="memberSave">저장</button>
										</div>
									</div>
								</form>
							</div>

							<div class="modal-box">
								<dialog class="modal" id="schModal">
								<body class="modal_body">
									<button style="float: right;" id="closeModal"
										class="btn close-button">x</button>
									<h2>학교 찾기</h2>
									<select id="ATPT_OFCDC_SC_CODE">
										<option value="B10">서울특별시교육청</option>
										<option value="C10">부산광역시교육청</option>
										<option value="D10">대구광역시교육청</option>
										<option value="E10">인천광역시교육청</option>
										<option value="F10">광주광역시교육청</option>
										<option value="G10">대전광역시교육청</option>
										<option value="H10">울산광역시교육청</option>
										<option value="I10">세종특별시교육청</option>
										<option value="J10">경기도교육청</option>
										<option value="K10">강원특별자치도교육청</option>
										<option value="M10">충청북도교육청</option>
										<option value="N10">충청남도교육청</option>
										<option value="P10">전라북도교육청</option>
										<option value="Q10">전라남도교육청</option>
										<option value="R10">경상북도교육청</option>
										<option value="S10">경상남도교육청</option>
										<option value="T10">제주특별자치도교육청</option>
									</select>
									<input type="text" id="SCHUL_NM" size="20">
									<button id="sheet-search-button" href="#" class="btn_A">검색</button>

									<div class="SCH_NM" id="SCH_Name"></div>
								</body>
								</dialog>
							</div>

							<!-- 모달@ㅉㄴㅃ@@@@@@@@@@@@@@@@@ㅃ@ㅃ@ㅃㅃ@ㅃ@ㅃ@ㅃ@ㅃ@ㅃ@ㅃ@ㅃㅃ@@ㅃㅃ@@ㅃ@@@@ -->



						</div>
						<!-- CardBody -->

					</div>

				</div>
				<!-- /.container-fluid -->

			</div>
			<!-- End of Main Content -->

			<!-- Footer -->
			<footer class="sticky-footer bg-white">
				<div class="container my-auto">
					<div class="copyright text-center my-auto">
						<span>Copyright &copy; Your Website 2020</span>
					</div>
				</div>
			</footer>
			<!-- End of Footer -->

		</div>
		<!-- End of Content Wrapper -->

	</div>
	<!-- End of Page Wrapper -->

	<!-- Scroll to Top Button-->
	<a class="scroll-to-top rounded" href="#page-top"> <i
		class="fas fa-angle-up"></i>
	</a>

	<!-- Logout Modal-->
	<div th:replace="common/topBar :: logoutModal"></div>

	<!-- Bootstrap core JavaScript-->
	<script th:src="@{/vendor/jquery/jquery.min.js}"></script>
	<script th:src="@{/vendor/bootstrap/js/bootstrap.bundle.min.js}"></script>

	<!-- Core plugin JavaScript-->
	<script th:src="@{/vendor/jquery-easing/jquery.easing.min.js}"></script>

	<!-- Custom scripts for all pages-->
	<script th:src="@{/js/sb-admin-2.min.js}"></script>

	<!-- Page level plugins -->
	<script th:src="@{/vendor/datatables/jquery.dataTables.min.js}"></script>
	<script th:src="@{/vendor/datatables/dataTables.bootstrap4.min.js}"></script>

	<!-- 회원 -->
	<script th:src="@{/js/memberManage.js}"></script>
	
	<script type="text/javascript">
	
	$("#memberSave").on("click", function () {
  		let formData = $("#frm").serialize(); // 폼 데이터 직렬화
  		
  		$.ajax({
    		url: "http://localhost:8088/app/mypage/memberUpdate",
    		type: "post",
    		data: formData, // 직렬화한 폼 데이터를 전송
    		success: function (data) {
      		if (data.trim() === 'YES') {
      			swal("저장 완료!", "초등 커뮤니티에 오신것을 환영합니다!", "success").then((OK) => {
        		      if(OK) {
          				container.classList.remove("right-panel-active");
        		      }
      			})
      		} else {
      			swal("가입 실패!", "작성란을 다시한번 확인해주세요!", "failed").then((OK) => {
      		      if(OK) {
        				container.classList.remove("right-panel-active");
      		      }
    			})
      		}
    		},
    		error: function () {
      		alert('에러 발생');
    		}
  		});
	});
	
	</script>
	

</body>

</html>

















